# Калашников Егор Игоревич

## БПИ226

## Вариант 19

## Условие: 
Задача об умной клумбе. На клумбе растет 40 цветов, за ними
непрерывно следят два садовника и поливают увядшие цветы, при
этом оба садовника очень боятся полить один и тот же цветок, который еще не начал вянуть. Создать многопоточное приложение, моделирующее состояния цветков на клумбе и действия садовников.
Клумба — отдельный поток который следит за состоянием
всех цветков и информирует, который из них полит, увядает (нужно полить), засох или перелит и сгнил (бесполезно
поливать). Каждый садовник задается отдельным потоком.

## Претендую на 8 баллов!

[Основное рещение с комментариями](main.cpp)

[Входные и Выходные данные](data)

## Отчёт:
### I. Сценарий. 
  Моделируется сценарий поливки двух Садовников грядки из 40 цветов при помощи многопоточности и синхронизации потоков при помощи мьютекс. Реализованы 3 сущности(классы) которые взаимодействуют друг с другом - Цветок, Садовник и Клумба(Сад). Цветки пронумерованы от 1 до 40 и Садовники названы(Марио и Луиджи)). Садовники и Клумба являются потоками, работают параллельно. Теперь подробнее:
  0) У цветка возможны три состояния - Полит, Нужно Полить и Умер(Засох или сгнил). Цветок засыхает, если нуждался в поливке и не был полит перед "засухой". 
  1) Садовники выбирают, какой цветок им полить, основываясь  на состоянии цветка. 
  2) Садовники поливают цветок, при этом ситуация, когда один цветок выбран двумя садовниками или один цветок поливается двумя садовниками, исключена(при помощи mutex).
  3) Клумба фиксирует состояния всех 40 цветков и выдает эти данные, после чего происходит "засуха", и у цветов меняется их состояние
  4) Все это повтоярется пока суммарно не будет полито 50 цветов(опционально, чтобы процесс не длился вечно).
  5) P.S. Засуха - это событие, происходящее с какой-то периодичностью, при котором состояния еще живых цветков меняются(политый -> нужно полить -> сухой), т.е раз в k секунд все живые цветки сохнут.(реализована внутри потока клумбы для удобства)
### II Функционал:
  1) Класс Цветка с методами Сохнуть и Полить
  2) Класс Садовника, реализуюшего свой поток с методом поливки, включающего в себя выбор случайного цветка из нуждающихся в поливке. Поток инициализируетсяя в конструкторе, а джойнится(запускается) в деструкторе, что довольно удобно. При этом, чтобы два Садовника не выбрали один и тот же цветок, используется мьютекс.
  3) Класс Клумбы(Garden) реализует свой поток с методом Мониторинга цветов, в котором выводятся данные о цветках, а потом спустя какое-то время происходит засуха, все цветки меняют состояние при помощи метода Сохнуть.
  4) Условие работы потоков - пока суммарное кол-во политых цветков меньше заданного предела.(задал как глобальные переменные)
  5) в мейне создается клумба и два садовника - марио и луиджи, а потоки запускаются внутри каждого из экземляров классов.
  6) Привязка методов потоков - у Садовника поливка, у Клумбы - мониторинг.
  7) Массив цветов объявлен глобально и инициализирован глобальным методом, чтобы все классы имели доступ к этим цветкам.
### III. По критериям:
1) На 4-5:
   - Программа должна разработана наи C++ с использованием для работы с потоками функций POSIX Thread.
   - Входные данные/параметры не предусмотрены. кол-во садовников и цветов - фиксированы, 2 и 40 соответсвенно.
   - Для используемых генераторов случайных чисел описаны их диапазоны и то, как интерпретируются данные этих генераторов.
   - Вывод программы достаточно информативен, отражает все ключевые протекающие в ней события в терминах предметной области. Наблюдатель на основе вывода программы должен понимает, что в ней происходит в каждый момент времени ее работы.
   - В программе присутствуют комментарии, поясняющие выполняемые действия и описание используемых объектов и переменных.
2) На 6-7:
   - В отчете подробно описан обобщенный алгоритм, используемый при реализации программы исходного словесного сценария. В котором показано, как на программу отображается каждый из субъектов предметной области.(II - функционал)
   - В программе есть генерация случайных данных в допустимых диапазонах.
   - Входные данные/параметры не предусмотрены. кол-во садовников и цветов - фиксированы, 2 и 40 соответсвенно. -----------------------------------------
3) На 8:
  - В программу, наряду с выводом в консоль, добавлен вывод результатов в файл. Имя файла для вывода данных задается в командной строке как один из ее параметров.
  - Результаты работы программы должны выводятся на экран и записываются в файл
  - Привёл 3 вариантв входных и выходных файлов с различными исходным данными и результатами выполнения программы.
  - Ввод данных из командной строки расширен.


## Конец! C НАСТУПАЮЩИМ!
